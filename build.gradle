plugins {
  id 'java-library'
  id "org.openapi.generator" version "4.2.2"
}

repositories {
  jcenter()
}

dependencies {
    implementation "org.openapitools:openapi-generator-gradle-plugin:4.2.2"
}

openApiGenerate {
  generatorName = "spring"
  // Only Parent.java is created (used in request), ChildOne.java and ChildTwo.java don't
  // If we add any of them into the request/response - it's created then.
  inputSpec = "$projectDir/docs/openapi/api-split.yml"

  // Whole API spec in single file - everything works just fine.
  // inputSpec = "$projectDir/docs/openapi/api-single.yml"
  outputDir = "$projectDir/build/generated/openapi"
  apiPackage = "org.openapi.example.api"
  modelPackage = "org.openapi.example.model"
  configOptions = [
      dateLibrary: "java8",
      "jdk8-default-interface": "false",
      skipDefaultInterface: "true",
      interfaceOnly: "true"
  ]
}

sourceSets.main.java.srcDir "$projectDir/build/generated/openapi/src/main/java"
sourceSets.main.resources.srcDir "$projectDir/build/generated/openapi/src/main/resources"
